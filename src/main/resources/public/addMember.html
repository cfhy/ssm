<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <link href="css/framework-font.css" rel="stylesheet" />
    <link href="css/framework-theme.css" rel="stylesheet" />
    <script src="js/jquery/jquery-2.1.1.min.js"></script>
    <script src="js/bootstrap/bootstrap.js"></script>
    <link href="js/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="js/select2/select2.min.css" rel="stylesheet" />
    <script src="js/select2/select2.min.js"></script>
    <link href="css/framework-ui.css" rel="stylesheet" />
    <script src="js/framework-ui.js"></script>
    <script>
        var keyValue = $.request("keyValue");
        $(function () {
            if (!!keyValue) {
                $.ajax({
                    url: "/member/detail",
                    data: {memberId: keyValue},
                    dataType: "json",
                    async: false,
                    success: function (data) {
                        $("#form1").formSerialize(data);
                        if(data.isAdmin){
                            $("#isAdmin").prop("checked","checked");
                        }
                    }
                });
            }
        });
        function submitForm() {
            var postData = $("#form1").formSerialize();
            postData.isAdmin= $("#isAdmin").prop("checked")?1:0;
            postData.id=keyValue ||'';
            if(!postData.userName){
                alert("用户名不能为空");
                return false;
            }
            if(!postData.password){
                alert("密码不能为空");
                return false;
            }
            $.submitForm({
                url: "/member/save",
                param: postData,
                success: function () {
                    $.currentWindow().$("#gridList").trigger("reloadGrid");
                }
            });
        }
    </script>
</head>
<body>
<form id="form1">
    <div class="widget-body">
        <div class="step-content" id="wizard-steps" style="border-left: none; border-bottom: none; border-right: none;">
            <div class="step-pane active" id="step-1" style="margin: 10px; margin-bottom: 0px;">
                <div class="panel panel-default">
                    <div class="panel-body" style="width: 98%;">
                        <table class="form">
                            <tr>
                                <th class="formTitle">用户名</th>
                                <td class="formValue">
                                    <input id="userName" name="userName" type="text" class="form-control required" placeholder="请输入用户名"/>
                                </td>
                            </tr>
                            <tr>
                                <th class="formTitle">密码</th>
                                <td class="formValue">
                                    <input id="password" name="password" type="text" class="form-control required" placeholder="请输入密码"/>
                                </td>
                            </tr>
                            <tr>
                                <th class="formTitle" style="height: 35px;">是否为管理员</th>
                                <td class="formValue" colspan="1" style="padding-top: 1px;">
                                    <div class="ckbox">
                                        <input id="isAdmin" name="isAdmin" type="checkbox"><label for="isAdmin"></label>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-button" id="wizard-actions" style="text-align:center;">
            <a id="btn_finish" class="btn btn-default" onclick="submitForm()">提交</a>
        </div>
    </div>
</form>

</body>
</html>